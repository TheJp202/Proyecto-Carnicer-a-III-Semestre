CREATE TABLE PAIS(
COD_PAIS INT PRIMARY KEY NOT NULL,
NOM_PAIS VARCHAR(50) NOT NULL
);

CREATE TABLE DEPARTAMENTO(
COD_DEP INT PRIMARY KEY NOT NULL,
NOM_DEP VARCHAR(50) NOT NULL,
COD_PAIS INT NOT NULL,
FOREIGN KEY (COD_PAIS) REFERENCES PAIS(COD_PAIS)
);

CREATE TABLE DISTRITO(
COD_DIS INT PRIMARY KEY NOT NULL,
NOM_DIS VARCHAR(50) NOT NULL,
COD_DEP INT NOT NULL,
FOREIGN KEY (COD_DEP) REFERENCES DEPARTAMENTO(COD_DEP)
);


CREATE TABLE TURNO(
COD_TURNO INT PRIMARY KEY NOT NULL,
LUNES CHAR(1) NOT NULL CHECK (LUNES='1' OR LUNES='0'),
MARTES CHAR(1) NOT NULL CHECK (MARTES='1' OR MARTES='0'),
MIERCOLES CHAR(1) NOT NULL CHECK (MIERCOLES='1' OR MIERCOLES='0'),
JUEVES CHAR(1) NOT NULL CHECK (JUEVES='1' OR JUEVES='0'),
VIERNES CHAR(1) NOT NULL CHECK (VIERNES='1' OR VIERNES='0'),
SABADO CHAR(1) NOT NULL CHECK (SABADO='1' OR SABADO='0'),
DOMINGO CHAR(1) NOT NULL CHECK (DOMINGO='1' OR DOMINGO='0'),
DESC_TURNO VARCHAR(100)
);

CREATE TABLE HORARIO(
COD_HOR INT PRIMARY KEY NOT NULL,
COD_TURNO INT NOT NULL,
HORA_INI_HOR TIME NOT NULL,
HORA_FIN_HOR TIME NOT NULL,
FOREIGN KEY (COD_TURNO) REFERENCES TURNO(COD_TURNO)
);

CREATE TABLE INGRESO(
COD_ING INT PRIMARY KEY NOT NULL,
HORA_INGR_ING DATETIME,
HORA_SALD_ING DATETIME,
TIPO_ING VARCHAR(20) NOT NULL CHECK (TIPO_ING = 'Puntual' OR TIPO_ING = 'Tardanza' OR TIPO_ING = 'Falta')
);

CREATE TABLE TIENDA(
COD_TIE INT PRIMARY KEY NOT NULL,
COD_DIS INT NOT NULL,	
NOM_TIE VARCHAR(50) NOT NULL,
DIR_TIE VARCHAR(50) NOT NULL,
TEL_TIE CHAR(7) NOT NULL,
FOREIGN KEY (COD_DIS) REFERENCES DISTRITO(COD_DIS)
);

CREATE TABLE CARGO(
COD_CARGO INT PRIMARY KEY NOT NULL,
NOM_CARGO VARCHAR(50) NOT NULL,
SUELDO_CARGO FLOAT NOT NULL,
DESC_CARGO VARCHAR(100) 
);

CREATE TABLE EMPLEADO(
COD_EMP INT PRIMARY KEY NOT NULL,
NOM_EMP VARCHAR(50) NOT NULL,
APE_EMP VARCHAR(50) NOT NULL,
DNI_EMP CHAR(8) NOT NULL UNIQUE,
COD_CARGO INT NOT NULL,
FECH_CONTR DATE NOT NULL,
COD_DIS INT NOT NULL,
COD_TIE INT NOT NULL,
DIR_EMP VARCHAR(50) NOT NULL,
CONT_EMP VARCHAR(50) NOT NULL,
FOREIGN KEY (COD_CARGO) REFERENCES CARGO(COD_CARGO),
FOREIGN KEY (COD_DIS) REFERENCES DISTRITO(COD_DIS),
FOREIGN KEY (COD_TIE) REFERENCES TIENDA(COD_TIE)
);

CREATE TABLE CONTROL_EMPLEADO(
COD_CONT_EMP INT PRIMARY KEY NOT NULL,
COD_HOR INT NOT NULL,
COD_ING INT NOT NULL,
COD_EMP INT NOT NULL,
DESC_CONT_EMP VARCHAR(100),
FOREIGN KEY (COD_HOR) REFERENCES HORARIO(COD_HOR),    
FOREIGN KEY (COD_ING) REFERENCES INGRESO(COD_ING),
FOREIGN KEY (COD_EMP) REFERENCES EMPLEADO(COD_EMP)
);

CREATE TABLE ANIMAL(
COD_ANI INT PRIMARY KEY NOT NULL,
NOM_ANI VARCHAR(50) NOT NULL,
DESC_ANI VARCHAR(100)
);

CREATE TABLE CATEGORIA(
COD_CAT INT PRIMARY KEY NOT NULL,
NOM_CAT VARCHAR(50) NOT NULL,
DESC_CAT VARCHAR(100)
);

CREATE TABLE MARCA(
COD_MAR INT PRIMARY KEY NOT NULL,
NOM_MAR VARCHAR(50) NOT NULL,
TEL_MAR VARCHAR(20) NOT NULL,
DESC_MAR VARCHAR(100)
);

CREATE TABLE PROVEEDOR(
ID_PRO INT PRIMARY KEY NOT NULL,
NOM_PRO VARCHAR(50) NOT NULL,
APE_PRO VARCHAR(50) NOT NULL,
TEL_PRO VARCHAR(20) NOT NULL,
RUC_PRO VARCHAR(30) NOT NULL,
DIR_PRO VARCHAR(50) NOT NULL,
COD_DIS INT NOT NULL,
FOREIGN KEY (COD_DIS) REFERENCES DISTRITO(COD_DIS)
);

CREATE TABLE CARNE(
ID_CAR INT PRIMARY KEY NOT NULL,
COD_ANI INT NOT NULL,
COD_CAT INT,
COD_MAR INT,
PRE_UNI_CAR FLOAT NOT NULL,
CAN_CAR INT NOT NULL,
PESO_CAR FLOAT NOT NULL,
PRE_TOT_CAR FLOAT AS (PRE_UNI_CAR * CAN_CAR),
FECH_VENC_CAR DATE,
DESC_CAR VARCHAR(100),
ID_PRO INT NOT NULL,
FOREIGN KEY (COD_ANI) REFERENCES ANIMAL(COD_ANI),
FOREIGN KEY (COD_CAT) REFERENCES CATEGORIA(COD_CAT),
FOREIGN KEY (COD_MAR) REFERENCES MARCA(COD_MAR),
FOREIGN KEY (ID_PRO) REFERENCES PROVEEDOR(ID_PRO)
);

CREATE TABLE PEDIDO_COMPRA(
COD_PED_COM INT PRIMARY KEY NOT NULL,
ID_CAR INT NOT NULL,
COD_EMP INT NOT NULL,
FECH_PED_COM DATE NOT NULL,
DESC_PED_COM VARCHAR(100),
FOREIGN KEY (ID_CAR) REFERENCES CARNE(ID_CAR),
FOREIGN KEY (COD_EMP) REFERENCES EMPLEADO(COD_EMP)
);

CREATE TABLE STOCK(
COD_STOCK INT PRIMARY KEY NOT NULL,
MIN_STOCK INT NOT NULL,
MAX_STOCK INT NOT NULL
);

CREATE TABLE ALMACEN(
COD_ALMA INT PRIMARY KEY NOT NULL,
TIPO_ALMA VARCHAR(50) NOT NULL,
COD_STOCK INT NOT NULL,
TAM_CUA_ALMA FLOAT NOT NULL,
DECS_ALMA VARCHAR(100),
FOREIGN KEY (COD_STOCK) REFERENCES STOCK(COD_STOCK)
);

CREATE TABLE INVENTARIO(
COD_INVE INT PRIMARY KEY NOT NULL,
NOM_INVE VARCHAR(50) NOT NULL,
CANT_INVE INT NOT NULL,
PESO_INVE FLOAT NOT NULL,
PRECIO_INVE FLOAT NOT NULL,
COD_EMP INT NOT NULL,
COD_ALMA INT NOT NULL,
FOREIGN KEY (COD_EMP) REFERENCES EMPLEADO(COD_EMP),
FOREIGN KEY (COD_ALMA) REFERENCES ALMACEN(COD_ALMA)
);

CREATE TABLE COMPRA(
COD_COM INT PRIMARY KEY NOT NULL,
DET_COM VARCHAR(100),
ID_PRO INT NOT NULL,
COD_INVE INT NOT NULL,
FOREIGN KEY (ID_PRO) REFERENCES PROVEEDOR(ID_PRO),
FOREIGN KEY (COD_INVE) REFERENCES INVENTARIO(COD_INVE)
);

CREATE TABLE VEHICULO(
COD_VEH INT PRIMARY KEY NOT NULL,
TIPO_VEH VARCHAR(50) NOT NULL,
PLACA_VEH CHAR(6) NOT NULL UNIQUE,
DESC_VEH VARCHAR(100)  
);

CREATE TABLE DELIVERY(
COD_DELI INT PRIMARY KEY NOT NULL,
COD_EMP INT NOT NULL,
COD_VEH INT NOT NULL,
DIR_DELI VARCHAR(50) NOT NULL,
COD_DIS INT NOT NULL,
FOREIGN KEY (COD_EMP) REFERENCES EMPLEADO(COD_EMP),
FOREIGN KEY (COD_VEH) REFERENCES VEHICULO(COD_VEH),
FOREIGN KEY (COD_DIS) REFERENCES DISTRITO(COD_DIS)
);

CREATE TABLE CLIENTE(
ID_CLI INT PRIMARY KEY NOT NULL,
NOM_CLI VARCHAR(50) NOT NULL,
APE_CLI VARCHAR(50) NOT NULL,
DNI_CLI CHAR(8) NOT NULL UNIQUE,
RUC_CLI VARCHAR(20) NOT NULL UNIQUE,
DIR_CLI VARCHAR(50) NOT NULL,
COD_DIS INT NOT NULL, 
FOREIGN KEY (COD_DIS) REFERENCES DISTRITO(COD_DIS)
);

CREATE TABLE PEDIDO_VENTA(
COD_PED_VEN INT PRIMARY KEY NOT NULL,
ID_CLI INT NOT NULL,
COD_EMP INT NOT NULL,
FECH_PED_VEN DATE NOT NULL,
DESC_PED_VEN VARCHAR(100),
COD_DELI INT,
FOREIGN KEY (ID_CLI) REFERENCES CLIENTE(ID_CLI),
FOREIGN KEY (COD_EMP) REFERENCES EMPLEADO(COD_EMP),
FOREIGN KEY (COD_DELI) REFERENCES DELIVERY(COD_DELI)
);

CREATE TABLE VENTA(
COD_VEN INT PRIMARY KEY NOT NULL,
COD_EMP INT NOT NULL,
COD_PED_VEN INT NOT NULL,
FOREIGN KEY (COD_EMP) REFERENCES EMPLEADO(COD_EMP),
FOREIGN KEY (COD_PED_VEN) REFERENCES PEDIDO_VENTA(COD_PED_VEN)
);

CREATE TABLE BOLETA(
NUM_BOL INT PRIMARY KEY NOT NULL,
RUC_BOL VARCHAR(20) NOT NULL,
FECH_BOL DATETIME NOT NULL,
TOTL_BOL FLOAT NOT NULL
);

CREATE TABLE FACTURA(
NUM_FAC INT PRIMARY KEY NOT NULL,
RUC_FAC VARCHAR(20) NOT NULL,
FECH_FAC DATETIME NOT NULL,
SUBT_FAC FLOAT NOT NULL,
IGV_FAC FLOAT DEFAULT 0.18,
TOTL_FAC FLOAT AS (SUBT_FAC+(SUBT_FAC * IGV_FAC))
);

CREATE TABLE COMPROBANTE(
NUM_COMP INT PRIMARY KEY NOT NULL,
COD_COM INT,
NUM_BOL INT,
NUM_FAC INT,
COD_VEN INT,
FOREIGN KEY (COD_COM) REFERENCES COMPRA(COD_COM),
FOREIGN KEY (NUM_BOL) REFERENCES BOLETA(NUM_BOL),
FOREIGN KEY (NUM_FAC) REFERENCES FACTURA(NUM_FAC),
FOREIGN KEY (COD_VEN) REFERENCES VENTA(COD_VEN)
)

